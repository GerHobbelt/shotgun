/*
Name: shotgun.js
License: MIT
Version: 3.0
URL: github.com/jgnewman/shotgun
*/
(function(a){'use strict';var b='3.0',c=999999,d={},e,f;function Events(){}e=new Events();function g(p,q){var i,l=p.length;for(i=0;i<l;i+=1){q(p[i],i);}}function h(p,q){var i;for(i in p){if(Object.prototype.hasOwnProperty.call(p,i)){q(p[i],i);}}}function j(p){return p.slice(0,p.length-1);}function k(p){return p[p.length - 1];}function m(){var p="SG-",i,q="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz";p+=(new Date()).getTime();c+=1;p+=("-"+c+"-");if(c===9999999){c=1000000;}for(i=0;i<25;i+=1){p+=q[Math.floor(Math.random()*q.length)];}return p;}function n(p,q){var r=m();d[r]={};function Directory(){}Directory.prototype={"_SG_dirEvents":d[r],"_SG_dirEventsKey":r,"_SG_parentDir":q,"_SG_dirName":p};return new Directory();}function o(p,q,r,s){var t=p._SG_dirEvents;if(q){t[q].apply(null,r);return true;}h(t,function(u){u.apply(null,r);});if(!s){return true;}return h(p,function(u){return o(u,q,r,s);});}f={"fire":function(p,q,r){var s,t,u,v,w=e;if(typeof q==='string'){t=[];u=q;}else{t=q;u=r;}if(k(p)==='*'){v=true;s=j(j(p)).split('/');}else{s=p.split('/');}g(s,function(x){w=w[x];});if(!w){return false;}return o(w,u,t,v);},"listen":function(p,q,r){var s=r||m(),t=p.split('/'),u=e;g(t,function(v){u[v]=u[v]||n(v,u);u=u[v];});u._SG_dirEvents[s]=q;this.fire('newListener',[p,q,s]);return s;},"remove":function(p,q){var r=p.split('/'),s=e;g(r,function(t){s=s[t];});if(q){delete s._SG_dirEvents[q];this.fire('rmListener',[p,q]);return true;}delete d[s._SG_dirEventsKey];delete s._SG_parentDir[s._SG_dirName];this.fire('rmEvent',[p]);return true;},"attempt":function(p,q,r){var s,t,u;if(typeof p==='function'){t=p;u=q;}else{s=p;t=q;u=r;}try{t();}catch(v){if(s){this.fire(s,[v,t],u);}this.fire('tryError',[v,t],u);}},"getEvents":function(){return e;},"version":b};if(a.define&&typeof a.define==='function'&&a.define.amd){a.define('SHOTGUN',[],f);a.define('SG',[],f);}else if(a.module&&a.module.exports){a.module.exports=f;}else{a.SHOTGUN=a.SG=f;}}(this));
