/*
Name: shotgun.js
License: MIT
Version: 2.0
*/
(function(gpa){"use strict";var va,vb={},vc='2.0',vd;function EvDir(pa){this['_::name']=pa;}va=new EvDir('eventsObj');function fa(pa,pb){var i,l=pa.length;for(i=0;i<l;i+=1){pb(pa[i],i);}}function fb(pa,pb){var i;for(i in pa){if(Object.prototype.hasOwnProperty.call(pa,i)){pb(pa[i],i);}}}function fc(pa){return pa.slice(1);}function fd(pa){return pa.slice(0,pa.length-1);}function fe(pa){return pa[pa.length-1];}function ff(pa) {if(pa[0]==='/'){pa=fc(pa);}if(fe(pa)==='/'){pa=fd(pa);}return pa;}function fg(){var i,ve='',vf='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz';for(i=0;i<24;i+=1){ve+=vf[Math.floor(Math.random()*vf.length)];}if(!vb[ve]||ve.slice(0,2)!=='_:'){vb[ve]=true;return ve;}else{return fg();}}vd={"fire":function(pa,pb,pc){var ve=[],vf=this,vg,vh,vi,vj;pa=ff(pa);vh=pa.split('/');if(!pc&&Object.prototype.toString.call(pb)==='[object Array]'){pc=pb;}else{vg=pb;}if(fe(vh)==='*'){vg=null;vj=true;vh.length=vh.length-1;}if(vh.length>1){fa(vh,function(e,i){var vk=fe(ve)||va,vl='_:'+e;ve.push(vk[vl]);});vi=fe(ve);}else{vi=va['_:'+vh[0]];}if(vi){if(vg){vi[vg]&&vi[vg].apply(null,pc);}else{if(vj){fb(vi,function(v,k){if(k.slice(0,2)==='_:'){(k!=='_::name')&&vf.fire(vh.join('/')+'/'+k.slice(2)+'/*',pc);}else{v.apply(null,pc);}});}else{fb(vi,function(v,k){if(k.slice(0, 2)!=='_:'){v.apply(null,pc);}});}}}},"listen":function(pa,pb,pc){var ve,vf,vg=[],vh,vi;pa=ff(pa);vf=pa.split('/');if(fe(vf)==='*'){vf.length=vf.length-1;}if(!pc&&typeof pb==='function'){pc=pb;ve=fg();}else{ve=pb;}if(vf.length>1){fa(vf,function(e,i){var vj=fe(vg)||va,vk='_:'+e;vj[vk]=vj[vk]||new EvDir(e);vg.push(vj[vk]);});vh=fe(vg);vh[ve]=pc;}else{vi='_:'+vf[0];va[vi]=va[vi]||new EvDir(vf[0]);va[vi][ve]=pc;}this.fire('newListener',[pa,ve,pc]);return ve;},"remove":function(pa,pb){var ve,vf=[],vg,vh;pa=ff(pa);ve=pa.split('/');if(fe(ve)==='*'){ve.length=ve.length-1;}if(ve.length>1){fa(ve,function(e,i){var vi=fe(vf)||va,vj='_:'+e;vf.push(vi[vj]);});vg=fe(vf);vh=fe(fd(vf));}else{vg=va[ve[0]];vh=va;}if(pb&&vg[pb]){delete vg[pb];delete vb[pb];this.fire('rmListener',[pa, pb]);}else if(!pb){fb(vg,function(v,k){delete vb[k];});delete vh['_:'+((vg)?vg['_::name']:ve[0])];this.fire('rmEvent',[pa]);}},"try":function(pa,pb,pc){var ve;if(!pc&&typeof pb==='function'){pc=pb;}else{ve=pb;}try{pc();}catch(e){(ve)?this.fire(pa,ve,[e]):this.fire(pa,[e]);if(pa!=='tryError'){(ve)?this.fire('tryError',ve,[e]):this.fire('tryError',[e]);}}},"getEvents":function(){return va;},"version":vc};if(gpa.define&&typeof gpa.define==='function'&&gpa.define.amd){gpa.define('SHOTGUN',[],vd);gpa.define('SG',[],vd);}else if(gpa.module&&gpa.module.exports){gpa.module.exports=vd;}else{gpa['SHOTGUN']=gpa['SG']=vd;}}(this));